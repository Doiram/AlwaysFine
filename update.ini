[Rainmeter]
Update=1000
SavePosition=0
OnUpdateAction=[!SetVariable hashCheck "[updateGetHash]" "AlwaysFine.ini"][!ToggleConfig "AlwaysFine" "AlwaysFine.ini"]

[Variables]
@Include=servicekey.inc

[Metadata]
Name=AlwaysFine Update

[updateCommand1]
Measure=Plugin
Plugin=RunCommand
Parameter="wget #updateLink#'&'download=1 -OutFile AlwaysFine_Update.zip;$pubHash = '#hashCheck#';$fileHash = Get-FileHash AlwaysFine_Update.zip -Algorithm md5;if($fileHash.Hash -eq $pubHash){;expand-archive -Force -path 'AlwaysFine_Update.zip';}else{;exit;}"
Program=powershell.exe
FinishAction=[!CommandMeasure updateCommand2 "Run"]

[updateCommand2]
Measure=Plugin
Plugin=RunCommand
Parameter=cd ../ && move /y AlwaysFine/AlwaysFine_Update && rmdir /s /q AlwaysFine && ren AlwaysFine_Update AlwaysFine
FinishAction=[!Log "Reload skin to apply changes" Warning][!DeactivateConfig]